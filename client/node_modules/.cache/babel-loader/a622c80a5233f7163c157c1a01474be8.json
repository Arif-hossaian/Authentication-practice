{"ast":null,"code":"var _jsxFileName = \"E:\\\\mern-auth\\\\client\\\\src\\\\components\\\\body\\\\profile\\\\Profile.jsx\",\n    _s = $RefreshSig$();\n\nimport { Container, Grid, Grow, Card, CardContent, Button, TableContainer, Table, TableHead, TableRow, TableCell, TableBody } from \"@material-ui/core\";\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { isLength, isMatch } from \"../../utils/validation/Validation.js\";\nimport { showErrMsg, showSuccessMsg } from \"../../utils/notification/Notification.js\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCheck, faEdit, faTimes, faTrash } from \"@fortawesome/free-solid-svg-icons\";\nimport { fetchAllUsers, dispatchGetAllUsers } from \"../../../redux/actions/usersActions.js\";\nimport classes from \"./profile.module.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst initialState = {\n  name: \"\",\n  password: \"\",\n  cf_password: \"\",\n  err: \"\",\n  success: \"\"\n};\n\nconst Profile = () => {\n  _s();\n\n  const auth = useSelector(state => state.auth);\n  const token = useSelector(state => state.token);\n  const users = useSelector(state => state.users);\n  const {\n    user,\n    isAdmin\n  } = auth;\n  const [data, setData] = useState(initialState);\n  const {\n    name,\n    password,\n    cf_password,\n    err,\n    success\n  } = data;\n  const [avatar, setAvatar] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [callback, setCallback] = useState(false);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (isAdmin) {\n      fetchAllUsers(token).then(res => {\n        dispatch(dispatchGetAllUsers(res));\n      });\n    }\n  }, [token, isAdmin, dispatch, callback]);\n\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setData({ ...data,\n      [name]: value,\n      err: \"\",\n      success: \"\"\n    });\n  }; //Change Avatar\n\n\n  const changeAvatar = async e => {\n    e.preventDefault();\n\n    try {\n      const file = e.target.files[0];\n      if (!file) return setData({ ...data,\n        err: \"No files were uploaded.\",\n        success: \"\"\n      });\n      if (file.size > 1024 * 1024) return setData({ ...data,\n        err: \"Size too large.\",\n        success: \"\"\n      });\n      if (file.type !== \"image/jpeg\" && file.type !== \"image/png\") return setData({ ...data,\n        err: \"File format is incorrect.\",\n        success: \"\"\n      });\n      let formData = new FormData();\n      formData.append(\"file\", file);\n      setLoading(true);\n      const res = await axios.post(\"/api/upload_avatar\", formData, {\n        headers: {\n          \"content-type\": \"multipart/form-data\",\n          Authorization: token\n        }\n      });\n      setLoading(false);\n      setAvatar(res.data.url);\n    } catch (err) {\n      setData({ ...data,\n        err: err.response.data.msg,\n        success: \"\"\n      });\n    }\n  }; //Update user Information\n\n\n  const updateInfor = () => {\n    try {\n      axios.patch(\"/user/update\", {\n        name: name ? name : user.name,\n        avatar: avatar ? avatar : user.avatar\n      }, {\n        headers: {\n          Authorization: token\n        }\n      });\n      setData({ ...data,\n        err: \"\",\n        success: \"Updated Success!\"\n      });\n    } catch (err) {\n      setData({ ...data,\n        err: err.response.data.msg,\n        success: \"\"\n      });\n    }\n  }; //Update User-password\n\n\n  const updatePassword = () => {\n    if (isLength(password)) return setData({ ...data,\n      err: \"Password must be at least 6 characters.\",\n      success: \"\"\n    });\n    if (!isMatch(password, cf_password)) return setData({ ...data,\n      err: \"Password did not match.\",\n      success: \"\"\n    });\n\n    try {\n      axios.post(\"/user/reset\", {\n        password\n      }, {\n        headers: {\n          Authorization: token\n        }\n      });\n      setData({ ...data,\n        err: \"\",\n        success: \"Updated Success!\"\n      });\n    } catch (err) {\n      setData({ ...data,\n        err: err.response.data.msg,\n        success: \"\"\n      });\n    }\n  }; //Update on Button-Click\n\n\n  const handleUpdate = () => {\n    if (name || avatar) updateInfor();\n    if (password) updatePassword();\n  }; //Delete from admin section user\n\n\n  const handleDelete = async id => {\n    try {\n      if (user._id !== id) {\n        if (window.confirm(\"Are you sure you want to delete this account?\")) {\n          setLoading(true);\n          await axios.delete(`/user/delete/${id}`, {\n            headers: {\n              Authorization: token\n            }\n          });\n          setLoading(false);\n          setCallback(!callback);\n        }\n      }\n    } catch (err) {\n      setData({ ...data,\n        err: err.response.data.msg,\n        success: \"\"\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [err && showErrMsg(err), success && showSuccessMsg(success), loading && /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Loading.....\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Grow, {\n      in: true,\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: /*#__PURE__*/_jsxDEV(Card, {\n          children: /*#__PURE__*/_jsxDEV(CardContent, {\n            children: /*#__PURE__*/_jsxDEV(Grid, {\n              container: true,\n              spacing: 3,\n              children: [/*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                md: 4,\n                xs: 12,\n                className: classes.left_grid,\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  style: {\n                    textAlign: \"center\"\n                  },\n                  children: isAdmin ? \"Admin profile\" : \"User profile\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: classes.avatar,\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: avatar ? avatar : user.avatar,\n                    alt: \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"file\",\n                      name: \"file\",\n                      id: \"file_up\",\n                      onChange: changeAvatar\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 206,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 203,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 201,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"name\",\n                    children: \"Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 215,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"name\",\n                    id: \"name\",\n                    defaultValue: user.name,\n                    onChange: handleChange,\n                    placeholder: \"Your name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 216,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"email\",\n                    children: \"Email\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"email\",\n                    name: \"email\",\n                    id: \"email\",\n                    defaultValue: user.email,\n                    placeholder: \"Your email address\",\n                    disabled: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 227,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"password\",\n                    children: \"New Password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 238,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"password\",\n                    name: \"password\",\n                    id: \"password\",\n                    placeholder: \"Your password\",\n                    value: password,\n                    onChange: handleChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 239,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 237,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    htmlFor: \"cf_password\",\n                    children: \"Confirm New Password\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"password\",\n                    name: \"cf_password\",\n                    id: \"cf_password\",\n                    placeholder: \"Confirm password\",\n                    value: cf_password,\n                    onChange: handleChange\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 251,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"em\", {\n                    style: {\n                      color: \"crimson\"\n                    },\n                    children: \"* If you update your password here, you will not be able to login quickly using google and facebook.\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 262,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 261,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    marginTop: \"18px\"\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Button, {\n                    variant: \"contained\",\n                    color: \"primary\",\n                    disabled: loading,\n                    size: \"large\",\n                    onClick: handleUpdate,\n                    children: \"Update\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 268,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 267,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Grid, {\n                item: true,\n                md: 8,\n                sm: 12,\n                children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                  style: {\n                    textAlign: \"center\"\n                  },\n                  children: isAdmin ? \"Users\" : \"My Orders\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 280,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(TableContainer, {\n                    children: /*#__PURE__*/_jsxDEV(Table, {\n                      children: [/*#__PURE__*/_jsxDEV(TableHead, {\n                        children: /*#__PURE__*/_jsxDEV(TableRow, {\n                          children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                            children: \"ID\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 288,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                            align: \"right\",\n                            children: \"Name\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 290,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                            align: \"right\",\n                            children: \"Email\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 291,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                            align: \"right\",\n                            children: \"Admin\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 292,\n                            columnNumber: 29\n                          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                            align: \"right\",\n                            children: \"Action\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 293,\n                            columnNumber: 29\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 287,\n                          columnNumber: 27\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 286,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(TableBody, {\n                        children: users.map(user => /*#__PURE__*/_jsxDEV(TableRow, {\n                          children: [/*#__PURE__*/_jsxDEV(TableCell, {\n                            component: \"th\",\n                            scope: \"row\",\n                            children: user._id\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 299,\n                            columnNumber: 31\n                          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                            component: \"th\",\n                            scope: \"row\",\n                            align: \"right\",\n                            children: user.name\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 302,\n                            columnNumber: 31\n                          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                            component: \"th\",\n                            scope: \"row\",\n                            align: \"right\",\n                            children: user.email\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 309,\n                            columnNumber: 31\n                          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                            component: \"th\",\n                            scope: \"row\",\n                            align: \"right\",\n                            children: user.role === 1 ? /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                              icon: faCheck\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 322,\n                              columnNumber: 35\n                            }, this) : /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                              icon: faTimes,\n                              color: \"red\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 324,\n                              columnNumber: 35\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 316,\n                            columnNumber: 31\n                          }, this), /*#__PURE__*/_jsxDEV(TableCell, {\n                            children: [/*#__PURE__*/_jsxDEV(Link, {\n                              to: `/edit_user/${user._id}`,\n                              children: /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                                icon: faEdit,\n                                title: \"Edit\"\n                              }, void 0, false, {\n                                fileName: _jsxFileName,\n                                lineNumber: 329,\n                                columnNumber: 35\n                              }, this)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 328,\n                              columnNumber: 33\n                            }, this), /*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n                              icon: faTrash,\n                              title: \"Remove\",\n                              style: {\n                                marginLeft: \"10px\"\n                              },\n                              onClick: () => handleDelete(user._id)\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 331,\n                              columnNumber: 33\n                            }, this)]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 327,\n                            columnNumber: 31\n                          }, this)]\n                        }, user._id, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 298,\n                          columnNumber: 29\n                        }, this))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 296,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 285,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 284,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 283,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 193,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Profile, \"mXYBK9iiTRj/f3e9KzFQ9uYGHtM=\", false, function () {\n  return [useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = Profile;\nexport default Profile;\n\nvar _c;\n\n$RefreshReg$(_c, \"Profile\");","map":{"version":3,"sources":["E:/mern-auth/client/src/components/body/profile/Profile.jsx"],"names":["Container","Grid","Grow","Card","CardContent","Button","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","React","useState","useEffect","axios","useSelector","useDispatch","Link","isLength","isMatch","showErrMsg","showSuccessMsg","FontAwesomeIcon","faCheck","faEdit","faTimes","faTrash","fetchAllUsers","dispatchGetAllUsers","classes","initialState","name","password","cf_password","err","success","Profile","auth","state","token","users","user","isAdmin","data","setData","avatar","setAvatar","loading","setLoading","callback","setCallback","dispatch","then","res","handleChange","e","value","target","changeAvatar","preventDefault","file","files","size","type","formData","FormData","append","post","headers","Authorization","url","response","msg","updateInfor","patch","updatePassword","handleUpdate","handleDelete","id","_id","window","confirm","delete","left_grid","textAlign","email","color","marginTop","map","role","marginLeft"],"mappings":"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","sourcesContent":["import {\r\n  Container,\r\n  Grid,\r\n  Grow,\r\n  Card,\r\n  CardContent,\r\n  Button,\r\n  TableContainer,\r\n  Table,\r\n  TableHead,\r\n  TableRow,\r\n  TableCell,\r\n  TableBody,\r\n} from \"@material-ui/core\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { isLength, isMatch } from \"../../utils/validation/Validation.js\";\r\nimport {\r\n  showErrMsg,\r\n  showSuccessMsg,\r\n} from \"../../utils/notification/Notification.js\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faCheck,\r\n  faEdit,\r\n  faTimes,\r\n  faTrash,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport {\r\n  fetchAllUsers,\r\n  dispatchGetAllUsers,\r\n} from \"../../../redux/actions/usersActions.js\";\r\nimport classes from \"./profile.module.css\";\r\n\r\nconst initialState = {\r\n  name: \"\",\r\n  password: \"\",\r\n  cf_password: \"\",\r\n  err: \"\",\r\n  success: \"\",\r\n};\r\nconst Profile = () => {\r\n  const auth = useSelector((state) => state.auth);\r\n  const token = useSelector((state) => state.token);\r\n\r\n  const users = useSelector((state) => state.users);\r\n\r\n  const { user, isAdmin } = auth;\r\n  const [data, setData] = useState(initialState);\r\n  const { name, password, cf_password, err, success } = data;\r\n\r\n  const [avatar, setAvatar] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [callback, setCallback] = useState(false);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (isAdmin) {\r\n      fetchAllUsers(token).then((res) => {\r\n        dispatch(dispatchGetAllUsers(res));\r\n      });\r\n    }\r\n  }, [token, isAdmin, dispatch, callback]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setData({ ...data, [name]: value, err: \"\", success: \"\" });\r\n  };\r\n\r\n  //Change Avatar\r\n  const changeAvatar = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const file = e.target.files[0];\r\n\r\n      if (!file)\r\n        return setData({\r\n          ...data,\r\n          err: \"No files were uploaded.\",\r\n          success: \"\",\r\n        });\r\n\r\n      if (file.size > 1024 * 1024)\r\n        return setData({ ...data, err: \"Size too large.\", success: \"\" });\r\n\r\n      if (file.type !== \"image/jpeg\" && file.type !== \"image/png\")\r\n        return setData({\r\n          ...data,\r\n          err: \"File format is incorrect.\",\r\n          success: \"\",\r\n        });\r\n\r\n      let formData = new FormData();\r\n      formData.append(\"file\", file);\r\n\r\n      setLoading(true);\r\n      const res = await axios.post(\"/api/upload_avatar\", formData, {\r\n        headers: {\r\n          \"content-type\": \"multipart/form-data\",\r\n          Authorization: token,\r\n        },\r\n      });\r\n\r\n      setLoading(false);\r\n      setAvatar(res.data.url);\r\n    } catch (err) {\r\n      setData({ ...data, err: err.response.data.msg, success: \"\" });\r\n    }\r\n  };\r\n\r\n  //Update user Information\r\n  const updateInfor = () => {\r\n    try {\r\n      axios.patch(\r\n        \"/user/update\",\r\n        {\r\n          name: name ? name : user.name,\r\n          avatar: avatar ? avatar : user.avatar,\r\n        },\r\n        {\r\n          headers: { Authorization: token },\r\n        }\r\n      );\r\n\r\n      setData({ ...data, err: \"\", success: \"Updated Success!\" });\r\n    } catch (err) {\r\n      setData({ ...data, err: err.response.data.msg, success: \"\" });\r\n    }\r\n  };\r\n\r\n  //Update User-password\r\n  const updatePassword = () => {\r\n    if (isLength(password))\r\n      return setData({\r\n        ...data,\r\n        err: \"Password must be at least 6 characters.\",\r\n        success: \"\",\r\n      });\r\n\r\n    if (!isMatch(password, cf_password))\r\n      return setData({ ...data, err: \"Password did not match.\", success: \"\" });\r\n\r\n    try {\r\n      axios.post(\r\n        \"/user/reset\",\r\n        { password },\r\n        {\r\n          headers: { Authorization: token },\r\n        }\r\n      );\r\n\r\n      setData({ ...data, err: \"\", success: \"Updated Success!\" });\r\n    } catch (err) {\r\n      setData({ ...data, err: err.response.data.msg, success: \"\" });\r\n    }\r\n  };\r\n\r\n  //Update on Button-Click\r\n  const handleUpdate = () => {\r\n    if (name || avatar) updateInfor();\r\n    if (password) updatePassword();\r\n  };\r\n\r\n  //Delete from admin section user\r\n  const handleDelete = async (id) => {\r\n    try {\r\n      if (user._id !== id) {\r\n        if (window.confirm(\"Are you sure you want to delete this account?\")) {\r\n          setLoading(true);\r\n          await axios.delete(`/user/delete/${id}`, {\r\n            headers: { Authorization: token },\r\n          });\r\n          setLoading(false);\r\n          setCallback(!callback);\r\n        }\r\n      }\r\n    } catch (err) {\r\n      setData({ ...data, err: err.response.data.msg, success: \"\" });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div>\r\n        {err && showErrMsg(err)}\r\n        {success && showSuccessMsg(success)}\r\n        {loading && <h3>Loading.....</h3>}\r\n      </div>\r\n      <Grow in>\r\n        <Container>\r\n          <Card>\r\n            <CardContent>\r\n              <Grid container spacing={3}>\r\n                <Grid item md={4} xs={12} className={classes.left_grid}>\r\n                  <h2 style={{ textAlign: \"center\" }}>\r\n                    {isAdmin ? \"Admin profile\" : \"User profile\"}\r\n                  </h2>\r\n                  <div className={classes.avatar}>\r\n                    <img src={avatar ? avatar : user.avatar} alt=\"\" />\r\n                    <span>\r\n                      {/* <FontAwesomeIcon icon={faCamera} /> */}\r\n                      {/* <p >Change</p> */}\r\n                      <input\r\n                        type=\"file\"\r\n                        name=\"file\"\r\n                        id=\"file_up\"\r\n                        onChange={changeAvatar}\r\n                      />\r\n                    </span>\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"name\">Name</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"name\"\r\n                      id=\"name\"\r\n                      defaultValue={user.name}\r\n                      onChange={handleChange}\r\n                      placeholder=\"Your name\"\r\n                    />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"email\">Email</label>\r\n                    <input\r\n                      type=\"email\"\r\n                      name=\"email\"\r\n                      id=\"email\"\r\n                      defaultValue={user.email}\r\n                      placeholder=\"Your email address\"\r\n                      disabled\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"password\">New Password</label>\r\n                    <input\r\n                      type=\"password\"\r\n                      name=\"password\"\r\n                      id=\"password\"\r\n                      placeholder=\"Your password\"\r\n                      value={password}\r\n                      onChange={handleChange}\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"form-group\">\r\n                    <label htmlFor=\"cf_password\">Confirm New Password</label>\r\n                    <input\r\n                      type=\"password\"\r\n                      name=\"cf_password\"\r\n                      id=\"cf_password\"\r\n                      placeholder=\"Confirm password\"\r\n                      value={cf_password}\r\n                      onChange={handleChange}\r\n                    />\r\n                  </div>\r\n\r\n                  <div>\r\n                    <em style={{ color: \"crimson\" }}>\r\n                      * If you update your password here, you will not be able\r\n                      to login quickly using google and facebook.\r\n                    </em>\r\n                  </div>\r\n                  <div style={{ marginTop: \"18px\" }}>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                      disabled={loading}\r\n                      size=\"large\"\r\n                      onClick={handleUpdate}\r\n                    >\r\n                      Update\r\n                    </Button>\r\n                  </div>\r\n                </Grid>\r\n                <Grid item md={8} sm={12}>\r\n                  <h2 style={{ textAlign: \"center\" }}>\r\n                    {isAdmin ? \"Users\" : \"My Orders\"}\r\n                  </h2>\r\n                  <div>\r\n                    <TableContainer>\r\n                      <Table>\r\n                        <TableHead>\r\n                          <TableRow>\r\n                            <TableCell>ID</TableCell>\r\n                            {/* <TableCell  align=\"right\">ID</TableCell> */}\r\n                            <TableCell align=\"right\">Name</TableCell>\r\n                            <TableCell align=\"right\">Email</TableCell>\r\n                            <TableCell align=\"right\">Admin</TableCell>\r\n                            <TableCell align=\"right\">Action</TableCell>\r\n                          </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                          {users.map((user) => (\r\n                            <TableRow key={user._id}>\r\n                              <TableCell component=\"th\" scope=\"row\">\r\n                                {user._id}\r\n                              </TableCell>\r\n                              <TableCell\r\n                                component=\"th\"\r\n                                scope=\"row\"\r\n                                align=\"right\"\r\n                              >\r\n                                {user.name}\r\n                              </TableCell>\r\n                              <TableCell\r\n                                component=\"th\"\r\n                                scope=\"row\"\r\n                                align=\"right\"\r\n                              >\r\n                                {user.email}\r\n                              </TableCell>\r\n                              <TableCell\r\n                                component=\"th\"\r\n                                scope=\"row\"\r\n                                align=\"right\"\r\n                              >\r\n                                {user.role === 1 ? (\r\n                                  <FontAwesomeIcon icon={faCheck} />\r\n                                ) : (\r\n                                  <FontAwesomeIcon icon={faTimes} color=\"red\"/>\r\n                                )}\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <Link to={`/edit_user/${user._id}`}>\r\n                                  <FontAwesomeIcon icon={faEdit} title=\"Edit\" />\r\n                                </Link>\r\n                                <FontAwesomeIcon\r\n                                  icon={faTrash}\r\n                                  title=\"Remove\"\r\n                                  style={{marginLeft: \"10px\"}}\r\n                                  onClick={() => handleDelete(user._id)}\r\n                                />\r\n                              </TableCell>\r\n                            </TableRow>\r\n                          ))}\r\n                        </TableBody>\r\n                      </Table>\r\n                    </TableContainer>\r\n                  </div>\r\n                </Grid>\r\n              </Grid>\r\n            </CardContent>\r\n          </Card>\r\n        </Container>\r\n      </Grow>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Profile;\r\n"]},"metadata":{},"sourceType":"module"}